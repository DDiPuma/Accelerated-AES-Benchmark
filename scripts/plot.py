#!/usr/bin/env python3

# Raw data from run_bench.py output
# FROM LAPTOP
# data = {'bench_cpu': {1024: 191.5639678,
#                       2048: 2.0660702,
#                       4096: 2.1390817,
#                       8192: 2.088988,
#                       16384: 2.2778252,
#                       32768: 2.4199116000000003,
#                       65536: 3.1043021,
#                       131072: 4.1321514,
#                       262144: 5.4424169000000004,
#                       524288: 8.925559,
#                       1048576: 15.5840303,
#                       2097152: 26.055050899999998,
#                       4194304: 50.7831056,
#                       8388608: 98.024356,
#                       16777216: 190.039568,
#                       33554432: 385.7121885,
#                       67108864: 753.1454973,
#                       134217728: 1486.8233513,
#                       268435456: 2950.8113488000004,
#                       536870912: 6019.013841399999,
#                       1073741824: 12396.6244436},
#         'bench_cl': {1024: 185.8054539,
#                      2048: 10.412938,
#                      4096: 10.2067076,
#                      8192: 13.584432199999998,
#                      16384: 11.2058599,
#                      32768: 11.6779356,
#                      65536: 11.655893,
#                      131072: 11.4839275,
#                      262144: 14.462511699999999,
#                      524288: 14.562726300000001,
#                      1048576: 18.5692882,
#                      2097152: 28.4969003,
#                      4194304: 41.5362563,
#                      8388608: 73.8196452,
#                      16777216: 133.01865940000002,
#                      33554432: 249.3200605,
#                      67108864: 501.7169051,
#                      134217728: 982.716728,
#                      268435456: 1853.1153393,
#                      536870912: 3687.4249363000004,
#                      1073741824: 7921.8452108},
#         'bench_ni': {1024: 155.4228399,
#                      2048: 2.2290289,
#                      4096: 2.6437367000000003,
#                      8192: 2.7325455,
#                      16384: 2.647233,
#                      32768: 2.8182141,
#                      65536: 2.8742042999999997,
#                      131072: 3.0311522,
#                      262144: 3.237309,
#                      524288: 3.5554259,
#                      1048576: 3.4699259,
#                      2097152: 4.2226603,
#                      4194304: 6.567779099999999,
#                      8388608: 10.676449400000001,
#                      16777216: 18.3532331,
#                      33554432: 34.480831200000004,
#                      67108864: 66.6387454,
#                      134217728: 127.4691117,
#                      268435456: 222.1000984,
#                      536870912: 441.0272061,
#                      1073741824: 1357.182711}}

# FROM AWS
#data = {'bench_cpu': {1024: 111.2361028, 2048: 1.2763656, 4096: 1.1778123999999999, 8192: 1.208511, 16384: 1.2653898000000001, 32768: 1.4103383999999999, 65536: 1.6530965, 131072: 2.219305, 262144: 3.5144866, 524288: 5.9169878, 1048576: 10.6167397, 2097152: 20.1880303, 4194304: 41.6641279, 8388608: 79.6077075, 16777216: 158.523712, 33554432: 320.95101939999995, 67108864: 636.2875976, 134217728: 1268.3399006, 268435456: 3138.2459725, 536870912: 7283.7490736, 1073741824: 13254.9803545}, 'bench_cl': {1024: 883.5669353999999, 2048: 726.6073768, 4096: 730.3237167000001, 8192: 728.6463781, 16384: 729.9117352999999, 32768: 728.9649305, 65536: 728.3001181000001, 131072: 729.6228593999999, 262144: 728.2743281, 524288: 730.5396449, 1048576: 729.4612063999999, 2097152: 732.4135765, 4194304: 740.9844188999999, 8388608: 748.9170544, 16777216: 772.6671819, 33554432: 820.9875652999999, 67108864: 911.0026546, 134217728: 1099.5821687999999, 268435456: 2112.3538727, 536870912: 4469.6389454, 1073741824: 9187.4542029}, 'bench_ni': {1024: 121.7174214, 2048: 1.2976482, 4096: 1.2175657, 8192: 1.2786738999999998, 16384: 1.2533267, 32768: 1.3680758, 65536: 1.4702517, 131072: 1.583077, 262144: 1.6309251999999999, 524288: 2.0388853, 1048576: 2.87858, 2097152: 4.509098, 4194304: 10.8860025, 8388608: 21.921699699999998, 16777216: 33.6731829, 33554432: 206.61643, 67108864: 501.0819667, 134217728: 998.3417109, 268435456: 1997.4101853, 536870912: 3996.1780258000003, 1073741824: 7989.0960137}}

# FROM LAPTOP WITH 4GB
data = {'bench_cpu': {1024: 421.8440506, 2048: 1.88808, 4096: 1.8561705, 8192: 1.8980987, 16384: 2.105818, 32768: 2.4764448, 65536: 2.9677227000000004, 131072: 4.0577324, 262144: 5.8735946, 524288: 9.2167984, 1048576: 15.1559498, 2097152: 27.8193743, 4194304: 52.3406628, 8388608: 100.670684, 16777216: 198.86603730000002, 33554432: 392.048447, 67108864: 785.1693066, 134217728: 1555.9025672, 268435456: 3088.8204349000002, 536870912: 6157.1495782, 1073741824: 12981.835066799998, 2147483648: 27663.3925985, 8589934592: 54167.0494977}, 'bench_cl': {1024: 524.6983389, 2048: 10.372553199999999, 4096: 10.9521781, 8192: 11.4617586, 16384: 11.6512528, 32768: 11.157620699999999, 65536: 10.7037725, 131072: 11.664592599999999, 262144: 14.101735099999999, 524288: 16.1523251, 1048576: 20.4787356, 2097152: 27.504319199999998, 4194304: 46.1269052, 8388608: 79.6025303, 16777216: 148.09166480000002, 33554432: 285.17997030000004, 67108864: 559.9334355, 134217728: 1092.978893, 268435456: 2165.3604591, 536870912: 4428.9694417, 1073741824: 9223.8854313, 2147483648: 26819.039721200003, 8589934592: 54193.80990769999}, 'bench_ni': {1024: 438.18086919999996, 2048: 2.199031, 4096: 2.1318445, 8192: 2.1827438999999997, 16384: 2.1627575, 32768: 2.2386068999999997, 65536: 2.4203177, 131072: 2.7329364, 262144: 2.9240205, 524288: 3.7941467999999996, 1048576: 5.0426766, 2097152: 6.8669468, 4194304: 11.346203699999998, 8388608: 20.033989899999998, 16777216: 37.0376622, 33554432: 71.5490022, 67108864: 139.3358588, 134217728: 277.7887605, 268435456: 566.1668987, 536870912: 1130.3467252, 1073741824: 3244.579557, 2147483648: 7461.7690797, 8589934592: 18185.227636400003}}


import matplotlib.pyplot as plt

if __name__ == "__main__":   
    sizes = list(data["bench_cl"].keys())
    cl_times = list(data["bench_cl"].values())
    cpu_times = list(data["bench_cpu"].values())
    ni_times = list(data["bench_ni"].values())

    plt.loglog(sizes, cpu_times, "bo",
               sizes, cl_times, "rs",
               sizes, ni_times, "g^")
    
    plt.legend(["Plain C", "OpenCL/GPU", "AES-NI"])

    plt.xlabel("File Size (bytes)")
    plt.ylabel("Average time to encrypt across 10 executions (msec)");
    plt.title("Runtime Comparison for AES-128 Encryption Implementations")
    
    plt.show()
