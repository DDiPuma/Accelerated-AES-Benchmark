#!/usr/bin/env python3

# Raw data from run_bench.py output
data = {'bench_cpu': {1024: 437.4372792,
                      2048: 2.0400511,
                      4096: 2.1116555,
                      8192: 2.2540596,
                      16384: 2.3571044,
                      32768: 2.6759771,
                      65536: 3.2805184,
                      131072: 4.5800865,
                      262144: 7.12078,
                      524288: 10.9351062,
                      1048576: 17.693065899999997,
                      2097152: 30.2204482,
                      4194304: 56.839378100000005,
                      8388608: 112.75540240000001,
                      16777216: 220.4464381,
                      33554432: 444.6432373,
                      67108864: 874.1028499,
                      134217728: 1742.4346122,
                      268435456: 3493.5006043000003,
                      536870912: 7071.075645399999,
                      1073741824: 14403.0052729,
                      2147483648: 29644.362548099998},
            'bench_cl': {1024: 302.2994208,
                         2048: 16.7649193,
                         4096: 18.5769665,
                         8192: 18.1104684,
                         16384: 16.6792389,
                         32768: 18.168133100000002,
                         65536: 16.5995125,
                         131072: 16.6161679,
                         262144: 16.6223706,
                         524288: 16.6061524,
                         1048576: 16.6498063,
                         2097152: 33.3529918,
                         4194304: 39.999990200000006,
                         8388608: 73.5772642,
                         16777216: 134.4914075,
                         33554432: 243.1097456,
                         67108864: 432.9728414,
                         134217728: 799.287291,
                         268435456: 1557.0877288,
                         536870912: 3042.4508437,
                         1073741824: 6644.9643512,
                         2147483648: 3001.3503311},
            'bench_ni': {1024: 5.5450397,
                         2048: 4.0133928999999995,
                         4096: 4.2530446,
                         8192: 4.376025599999999,
                         16384: 3.8347335,
                         32768: 4.338583799999999,
                         65536: 4.9849739,
                         131072: 5.186368,
                         262144: 5.2877373,
                         524288: 7.6936785,
                         1048576: 10.452101599999999,
                         2097152: 14.0743814,
                         4194304: 23.3432651,
                         8388608: 20.268633899999998,
                         16777216: 21.930066800000002,
                         33554432: 41.7358811,
                         67108864: 72.77937390000001,
                         134217728: 142.95018140000002,
                         268435456: 280.995946,
                         536870912: 563.0427403,
                         1073741824: 1156.5537208,
                         2147483648: 4422.7570365}}

import matplotlib.pyplot as plt

if __name__ == "__main__":   
    sizes = list(data["bench_cl"].keys())
    cl_times = list(data["bench_cl"].values())
    cpu_times = list(data["bench_cpu"].values())
    ni_times = list(data["bench_ni"].values())

    plt.loglog(sizes, cpu_times, "bo",
               sizes, cl_times, "rs",
               sizes, ni_times, "g^")
    
    plt.legend(["Plain C", "OpenCL/GPU", "AES-NI"])

    plt.xlabel("File Size (bytes)")
    plt.ylabel("Average time to encrypt across 10 executions (msec)");
    plt.title("Runtime Comparison for AES-128 Encryption Implementations")
    
    plt.show()
